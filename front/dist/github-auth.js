angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("/plugins/github-auth/github-auth.html","module.run(['$templateCache', ($templateCache) ->\n $templateCache.put('plugin/github-auth', '''\n<div tg-github-login-button=\"tg-github-login-button\"><a href=\"\" title=\"Enter with your github account\" class=\"button button-auth\"><img src=\"/plugins/github-auth/images/github-logo.png\"/><span>Sign in with Github</span></a></div>''')]);")}]),function(){var AUTH_URL,GithubLoginButtonDirective,module;AUTH_URL="https://github.com/login/oauth/authorize",GithubLoginButtonDirective=function($window,$params,$location,$config,$events,$confirm,$auth,$navUrls,$loader){var link;return link=function($scope,$el,$attrs){var clientId,loginOnError,loginOnSuccess,loginWithGitHubAccount;return clientId=$config.get("gitHubClientId",null),loginOnSuccess=function(response){var nextUrl;return nextUrl=$params.next&&$params.next!==$navUrls.resolve("login")?$params.next:$navUrls.resolve("home"),$events.setupConnection(),$location.search("next",null),$location.search("token",null),$location.search("state",null),$location.search("code",null),$location.path(nextUrl)},loginOnError=function(response){return $location.search("state",null),$location.search("code",null),$loader.pageLoaded(),response.data._error_message?$confirm.notify("light-error",response.data._error_message):$confirm.notify("light-error","Our Oompa Loompas have not been able to get you credentials from GitHub.")},loginWithGitHubAccount=function(){var code,data,token,type;return type=$params.state,code=$params.code,token=$params.token,"github"===type&&code?($loader.start(!0),data={code:code,token:token},$auth.login(data,type).then(loginOnSuccess,loginOnError)):void 0},loginWithGitHubAccount(),$el.on("click",".button-auth",function(event){var redirectToUri,url;return redirectToUri=$location.absUrl(),url=AUTH_URL+"?client_id="+clientId+"&redirect_uri="+redirectToUri+"&state=github&scope=user:email",$window.location.href=url}),$scope.$on("$destroy",function(){return $el.off()})},{link:link,restrict:"EA",template:""}},module=angular.module("taigaContrib.githubAuth",[]),module.directive("tgGithubLoginButton",["$window","$routeParams","$tgLocation","$tgConfig","$tgEvents","$tgConfirm","$tgAuth","$tgNavUrls","tgLoader",GithubLoginButtonDirective])}.call(this);